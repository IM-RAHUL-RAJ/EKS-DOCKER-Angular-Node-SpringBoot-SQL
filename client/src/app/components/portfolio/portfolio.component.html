<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">

<div class="portfolio-container">
    <h2>My Portfolio</h2>
    
    <!-- Sort Option -->
    <div class="sort-options">
      <label for="sort">Sort by:</label>
      <select id="sort" (change)="sortPortfolio($event)">
        <option value="name">Name</option>
        <option value="investedCapital">Invested Capital</option>
        <option value="profitLoss">Profit/Loss</option>
      </select>
    </div>
  
    <div class="portfolio-summary">
      <div class="summary-item">
        <span>Total Invested Capital: {{ getTotalInvestedCapital() | currency }}</span>
      </div>
      <div class="summary-item">
        <span>Total Current Value: {{ getTotalCurrentValue() | currency }}</span>
      </div>
      <div class="summary-item">
        <span>Total Profit/Loss: {{ getTotalProfitLoss() | currency }}</span>
      </div>
      <div class="summary-item">
        <span>Total Day Change: {{ getTotalDayChange() | currency }}</span>
      </div>
    </div>
  
    <div class="portfolio-card" *ngFor="let stock of portfolio">
      <div class="stock-info">
        <span class="stock-name">{{stock.instrument}}</span>
        <span class="stock-id">{{stock.instrumentId}}</span>
      </div>
    
      <div class="stock-details">
        <div class="stock-metric">
          <span>Quantity:</span> {{stock.quantity}}
        </div>
        <div class="stock-metric">
          <span>Avg. Price:</span> {{stock.averagePrice | currency}}
        </div>
        <div class="stock-metric">
          <span>Invested Capital:</span> {{stock.investedCapital | currency}}
        </div>
        <div class="stock-metric">
          <span>LTP:</span> {{stock.ltp | currency}}
        </div>
        <div class="stock-metric">
          <span>% Change:</span> {{stock.percentChange | number:'1.2-2'}}%
        </div>
        <div class="stock-metric">
          Profit/Loss: <span [ngClass]="profLossFunc(stock.profitLoss)">{{stock.profitLoss | currency}}</span>
        </div>
        <div class="stock-metric">
          <span>Day Change %:</span> {{stock.dayChangePercent | number:'1.2-2'}}%
        </div>
        <div class="stock-metric sell-button">
          <button (click)="SellForm(stock.averagePrice)">Sell</button>
        </div>
      </div>
    </div>
  </div>
